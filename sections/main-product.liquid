{% comment %}
  naro - LP風商品ページ v8
  シンプル構成：ヒーロー → 違い → 商品 → レビュー（かっこいいUI） → FAQ
{% endcomment %}

<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');
  
  :root {
    --black: #1a1a1a;
    --white: #ffffff;
    --cream: #faf9f7;
    --gray-100: #f5f5f5;
    --gray-200: #e8e8e8;
    --gray-500: #666666;
    --gray-700: #404040;
  }

  .naro-lp * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .naro-lp {
    font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--black);
    line-height: 1.8;
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
    background: var(--white);
  }

  /* ===== ANIMATIONS ===== */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* ===== HERO ===== */
  .naro-hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    background: linear-gradient(180deg, var(--cream) 0%, var(--white) 100%);
    padding: 100px 24px 80px;
  }

  .naro-hero-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
  }

  @media (max-width: 900px) {
    .naro-hero-inner {
      grid-template-columns: 1fr;
      gap: 32px;
    }
    .naro-hero {
      min-height: auto;
      padding: 70px 16px 48px;
    }
    .naro-hero-image {
      order: -1;
    }
    .naro-hero-badge {
      top: 12px;
      left: 12px;
      padding: 6px 12px;
      font-size: 9px;
    }
    .naro-hero-content {
      padding: 0;
      text-align: center;
    }
    .naro-hero-brand {
      font-size: 12px;
      margin-bottom: 12px;
    }
    .naro-hero-title {
      font-size: 24px;
      margin-bottom: 16px;
    }
    .naro-hero-subtitle {
      font-size: 14px;
      margin-bottom: 24px;
      line-height: 1.8;
    }
    .naro-hero-price {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .naro-hero-cta {
      width: 100%;
      text-align: center;
      padding: 16px 32px;
    }
  }

  .naro-hero-image {
    position: relative;
    cursor: zoom-in;
  }

  .naro-hero-image > .naro-zoom-hint {
    position: absolute;
    bottom: 16px;
    right: 16px;
  }

  .naro-hero-image img {
    width: 100%;
    border-radius: 8px;
    box-shadow: 0 30px 60px rgba(0,0,0,0.1);
  }

  .naro-hero-badge {
    position: absolute;
    top: 16px;
    left: 16px;
    background: var(--black);
    color: var(--white);
    padding: 8px 16px;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    border-radius: 4px;
  }

  .naro-hero-content {
    padding: 20px 0;
  }

  .naro-hero-brand {
    font-size: 14px;
    letter-spacing: 0.2em;
    color: var(--gray-500);
    margin-bottom: 20px;
    text-transform: uppercase;
  }

  .naro-hero-title {
    font-size: clamp(26px, 5vw, 40px);
    font-weight: 500;
    line-height: 1.4;
    margin-bottom: 24px;
  }

  .naro-hero-subtitle {
    font-size: 16px;
    color: var(--gray-500);
    margin-bottom: 32px;
    line-height: 1.9;
  }

  .naro-hero-price {
    font-size: 28px;
    font-weight: 500;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  @media (max-width: 900px) {
    .naro-hero-price {
      justify-content: center;
    }
  }

  .naro-hero-price-original {
    font-size: 20px;
    color: var(--gray-500);
    text-decoration: line-through;
    font-weight: 400;
  }

  .naro-hero-price-badge {
    background: #e53935;
    color: white;
    font-size: 12px;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 4px;
  }

  .naro-hero-price-note {
    font-size: 13px;
    color: var(--gray-500);
    margin-bottom: 24px;
  }

  .naro-hero-cta {
    display: inline-block;
    background: var(--black);
    color: var(--white);
    padding: 18px 48px;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.3s ease;
  }

  .naro-hero-cta:hover {
    background: var(--gray-700);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }

  /* ===== DIFFERENCE SECTION ===== */
  .naro-difference {
    padding: 100px 20px;
    background: var(--black);
    color: var(--white);
  }

  @media (max-width: 768px) {
    .naro-difference {
      padding: 64px 16px;
    }
  }

  .naro-difference-inner {
    max-width: 900px;
    margin: 0 auto;
  }

  .naro-difference-title {
    font-size: clamp(22px, 4vw, 32px);
    font-weight: 500;
    text-align: center;
    margin-bottom: 20px;
  }

  .naro-difference-subtitle {
    font-size: 15px;
    color: rgba(255,255,255,0.7);
    text-align: center;
    margin-bottom: 48px;
    line-height: 1.8;
  }

  @media (max-width: 768px) {
    .naro-difference-subtitle {
      font-size: 14px;
      margin-bottom: 36px;
    }
  }

  .naro-difference-table {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2px;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    overflow: hidden;
  }

  @media (max-width: 600px) {
    .naro-difference-table {
      grid-template-columns: 1fr;
    }
  }

  .naro-difference-column {
    background: var(--black);
    padding: 32px 24px;
  }

  @media (max-width: 768px) {
    .naro-difference-column {
      padding: 24px 20px;
    }
  }

  .naro-difference-column-title {
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.1em;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(255,255,255,0.2);
  }

  .naro-difference-column.normal .naro-difference-column-title {
    color: rgba(255,255,255,0.5);
  }

  .naro-difference-column.naro .naro-difference-column-title {
    color: #4ade80;
  }

  .naro-difference-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .naro-difference-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    font-size: 14px;
    line-height: 1.7;
  }

  .naro-difference-column.normal .naro-difference-item {
    color: rgba(255,255,255,0.6);
  }

  .naro-difference-column.naro .naro-difference-item {
    color: var(--white);
  }

  .naro-difference-icon {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    margin-top: 2px;
  }

  .naro-difference-column.normal .naro-difference-icon {
    background: rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.4);
  }

  .naro-difference-column.naro .naro-difference-icon {
    background: #4ade80;
    color: var(--black);
  }

  .naro-difference-highlight {
    margin-top: 40px;
    padding: 24px;
    background: rgba(255,255,255,0.05);
    border-radius: 8px;
    text-align: center;
  }

  .naro-difference-highlight p {
    font-size: 15px;
    line-height: 1.8;
    color: rgba(255,255,255,0.8);
  }

  .naro-difference-highlight strong {
    color: var(--white);
  }

  @media (max-width: 768px) {
    .naro-difference-highlight {
      padding: 20px;
      margin-top: 32px;
    }
    .naro-difference-highlight p {
      font-size: 14px;
    }
  }

  /* ===== PRODUCT SECTION ===== */
  .naro-product-section {
    padding: 100px 20px;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-product-section {
      padding: 64px 16px;
    }
  }

  .naro-product-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    max-width: 1200px;
    margin: 0 auto;
    align-items: start;
  }

  @media (max-width: 900px) {
    .naro-product-container {
      grid-template-columns: 1fr;
      gap: 40px;
    }
  }

  @media (max-width: 768px) {
    .naro-product-container {
      gap: 32px;
    }
  }

  .naro-gallery {
    display: flex;
    flex-direction: column;
    gap: 16px;
    position: sticky;
    top: 100px;
  }

  @media (max-width: 900px) {
    .naro-gallery {
      position: relative;
      top: 0;
      gap: 12px;
    }
  }

  .naro-main-image {
    width: 100%;
    aspect-ratio: 1;
    overflow: hidden;
    background: var(--gray-100);
    border-radius: 12px;
    position: relative;
    cursor: zoom-in;
  }

  @media (max-width: 768px) {
    .naro-main-image {
      border-radius: 10px;
    }
  }

  .naro-main-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .naro-zoom-hint {
    position: absolute;
    bottom: 12px;
    right: 12px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--black);
    opacity: 0.7;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .naro-main-image:hover .naro-zoom-hint {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .naro-zoom-hint {
      width: 36px;
      height: 36px;
      bottom: 10px;
      right: 10px;
    }
    .naro-zoom-hint svg {
      width: 18px;
      height: 18px;
    }
  }

  .naro-thumbnails {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 12px;
  }

  @media (max-width: 768px) {
    .naro-thumbnails {
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }
  }

  .naro-thumbnail {
    aspect-ratio: 1;
    overflow: hidden;
    border-radius: 8px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
    background: var(--gray-100);
  }

  @media (max-width: 768px) {
    .naro-thumbnail {
      border-radius: 6px;
    }
  }

  .naro-thumbnail:hover,
  .naro-thumbnail.active {
    border-color: var(--black);
  }

  .naro-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .naro-product-info {
    padding: 20px 0;
  }

  @media (max-width: 768px) {
    .naro-product-info {
      padding: 0;
    }
  }

  .naro-product-brand {
    font-size: 13px;
    letter-spacing: 0.15em;
    color: var(--gray-500);
    margin-bottom: 12px;
    text-transform: uppercase;
  }

  @media (max-width: 768px) {
    .naro-product-brand {
      font-size: 11px;
      margin-bottom: 8px;
    }
  }

  .naro-product-title {
    font-size: 28px;
    font-weight: 500;
    margin-bottom: 16px;
  }

  @media (max-width: 768px) {
    .naro-product-title {
      font-size: 22px;
      margin-bottom: 12px;
    }
  }

  .naro-product-price {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  @media (max-width: 768px) {
    .naro-product-price {
      font-size: 26px;
    }
  }

  .naro-price-per-item {
    font-size: 14px;
    color: var(--gray-500);
    margin-bottom: 32px;
    min-height: 20px;
  }

  @media (max-width: 768px) {
    .naro-price-per-item {
      font-size: 13px;
      margin-bottom: 24px;
    }
  }

  .naro-discount-badge {
    display: inline-block;
    background: #e8f5e9;
    color: #2e7d32;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    margin-left: 8px;
  }

  @media (max-width: 768px) {
    .naro-discount-badge {
      font-size: 11px;
      padding: 2px 6px;
    }
  }

  .naro-option-group {
    margin-bottom: 28px;
  }

  @media (max-width: 768px) {
    .naro-option-group {
      margin-bottom: 24px;
    }
  }

  .naro-option-label {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 12px;
    display: block;
  }

  @media (max-width: 768px) {
    .naro-option-label {
      font-size: 12px;
      margin-bottom: 10px;
    }
  }

  .naro-color-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  @media (max-width: 768px) {
    .naro-color-options {
      gap: 8px;
    }
  }

  .naro-color-option {
    padding: 12px 24px;
    border: 1.5px solid var(--gray-200);
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s ease;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-color-option {
      padding: 10px 20px;
      font-size: 13px;
      border-radius: 6px;
    }
  }

  .naro-color-option:hover {
    border-color: var(--gray-500);
  }

  .naro-color-option.selected,
  .naro-color-option:has(input:checked) {
    border-color: var(--black);
    background: var(--black);
    color: var(--white);
  }

  .naro-color-option input {
    display: none;
  }

  .naro-set-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border: 1.5px solid var(--gray-200);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: var(--white);
    width: 100%;
    margin-bottom: 10px;
  }

  @media (max-width: 768px) {
    .naro-set-option {
      padding: 14px 16px;
      border-radius: 6px;
    }
  }

  .naro-set-option:hover {
    border-color: var(--gray-500);
  }

  .naro-set-option.selected,
  .naro-set-option:has(input:checked) {
    border-color: var(--black);
    background: var(--cream);
  }

  .naro-set-option input {
    display: none;
  }

  .naro-set-name {
    font-weight: 600;
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }

  @media (max-width: 768px) {
    .naro-set-name {
      font-size: 14px;
      gap: 6px;
    }
  }

  .naro-set-badge {
    background: var(--black);
    color: var(--white);
    padding: 2px 8px;
    font-size: 10px;
    font-weight: 600;
    border-radius: 4px;
  }

  @media (max-width: 768px) {
    .naro-set-badge {
      font-size: 9px;
      padding: 2px 6px;
    }
  }

  .naro-set-price {
    font-size: 14px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-set-price {
      font-size: 13px;
    }
  }

  .naro-add-to-cart {
    width: 100%;
    padding: 20px;
    background: var(--black);
    color: var(--white);
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: inherit;
  }

  @media (max-width: 768px) {
    .naro-add-to-cart {
      padding: 18px;
      font-size: 14px;
      border-radius: 6px;
    }
  }

  .naro-add-to-cart:hover {
    background: var(--gray-700);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }

  .naro-add-to-cart:disabled {
    background: var(--gray-500);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .naro-benefits {
    margin-top: 32px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  @media (max-width: 768px) {
    .naro-benefits {
      margin-top: 24px;
      gap: 10px;
    }
  }

  .naro-benefit {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-benefit {
      font-size: 13px;
      gap: 10px;
    }
  }

  .naro-benefit-icon {
    color: #2e7d32;
    font-size: 16px;
  }

  /* ===== PRODUCT DETAILS ACCORDION ===== */
  .naro-product-details {
    margin-top: 32px;
    border-top: 1px solid var(--gray-200);
    padding-top: 24px;
  }

  @media (max-width: 768px) {
    .naro-product-details {
      margin-top: 24px;
      padding-top: 20px;
    }
  }

  .naro-details-accordion {
    background: var(--white);
  }

  .naro-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    padding: 8px 0;
  }

  .naro-details-header:hover {
    color: var(--gray-500);
  }

  .naro-details-toggle {
    font-size: 20px;
    font-weight: 300;
    color: var(--gray-500);
    transition: transform 0.3s ease;
  }

  .naro-details-accordion.open .naro-details-toggle {
    transform: rotate(45deg);
  }

  .naro-details-body {
    display: none;
    padding-top: 16px;
    font-size: 13px;
    line-height: 1.9;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-details-body {
      font-size: 12px;
    }
  }

  .naro-details-accordion.open .naro-details-body {
    display: block;
  }

  .naro-details-body p {
    margin-bottom: 8px;
  }

  .naro-details-body .naro-details-note {
    font-size: 12px;
    margin-top: 12px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-details-body .naro-details-note {
      font-size: 11px;
    }
  }

  /* ===== SIZE CHART ===== */
  .naro-size-chart {
    margin: 20px 0;
  }

  .naro-size-chart p {
    margin-bottom: 12px;
  }

  .naro-size-chart table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  @media (max-width: 768px) {
    .naro-size-chart table {
      font-size: 12px;
    }
  }

  .naro-size-chart th,
  .naro-size-chart td {
    padding: 10px 12px;
    text-align: center;
    border-bottom: 1px solid var(--gray-200);
  }

  .naro-size-chart th {
    font-weight: 600;
    color: var(--black);
    background: var(--gray-100);
  }

  .naro-size-chart td:first-child {
    text-align: left;
    font-weight: 500;
    color: var(--black);
  }

  .naro-size-chart tbody tr:last-child td {
    border-bottom: none;
  }

  .naro-size-chart .naro-size-note {
    font-size: 12px;
    color: var(--gray-500);
    margin-top: 12px;
  }

  /* ===== REVIEWS SECTION (CUSTOM UI) ===== */
  .naro-reviews {
    padding: 100px 20px;
    background: var(--cream);
  }

  @media (max-width: 768px) {
    .naro-reviews {
      padding: 64px 16px;
    }
  }

  .naro-reviews-inner {
    max-width: 900px;
    margin: 0 auto;
  }

  .naro-reviews-header {
    text-align: center;
    margin-bottom: 48px;
  }

  @media (max-width: 768px) {
    .naro-reviews-header {
      margin-bottom: 32px;
    }
  }

  .naro-reviews-summary {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    margin-top: 24px;
    padding: 24px;
    background: var(--white);
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.04);
  }

  @media (max-width: 768px) {
    .naro-reviews-summary {
      flex-direction: column;
      gap: 16px;
      padding: 20px;
    }
  }

  .naro-reviews-score {
    text-align: center;
  }

  .naro-reviews-score-number {
    font-size: 48px;
    font-weight: 600;
    line-height: 1;
    color: var(--black);
  }

  @media (max-width: 768px) {
    .naro-reviews-score-number {
      font-size: 40px;
    }
  }

  .naro-reviews-score-max {
    font-size: 16px;
    color: var(--gray-500);
    font-weight: 400;
  }

  .naro-reviews-stars {
    display: flex;
    gap: 4px;
    margin-top: 8px;
  }

  .naro-reviews-stars .star {
    color: #fbbf24;
    font-size: 20px;
  }

  .naro-reviews-stars .star.empty {
    color: var(--gray-200);
  }

  .naro-reviews-count {
    font-size: 14px;
    color: var(--gray-500);
    margin-top: 8px;
  }

  .naro-reviews-divider {
    width: 1px;
    height: 80px;
    background: var(--gray-200);
  }

  @media (max-width: 768px) {
    .naro-reviews-divider {
      width: 100%;
      height: 1px;
    }
  }

  .naro-reviews-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }

  .naro-reviews-cta p {
    font-size: 14px;
    color: var(--gray-500);
  }

  .naro-write-review-btn {
    display: inline-block;
    background: var(--black);
    color: var(--white);
    padding: 14px 32px;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .naro-write-review-btn:hover {
    background: var(--gray-700);
    transform: translateY(-2px);
  }

  /* Judge.me Widget Container */
  .naro-reviews-widget {
    margin-top: 40px;
  }

  @media (max-width: 768px) {
    .naro-reviews-widget {
      margin-top: 32px;
    }
  }

  /* Judge.me スタイル上書き */
  .jdgm-widget {
    font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif !important;
  }

  .jdgm-rev-widg {
    border: none !important;
    background: transparent !important;
  }

  .jdgm-rev-widg__header {
    display: none !important;
  }

  .jdgm-rev {
    background: var(--white) !important;
    border-radius: 12px !important;
    padding: 24px !important;
    margin-bottom: 16px !important;
    border: none !important;
    box-shadow: 0 2px 12px rgba(0,0,0,0.04) !important;
  }

  @media (max-width: 768px) {
    .jdgm-rev {
      padding: 20px !important;
      border-radius: 10px !important;
    }
  }

  .jdgm-rev__header {
    margin-bottom: 12px !important;
  }

  .jdgm-rev__author {
    font-weight: 600 !important;
    color: var(--black) !important;
  }

  .jdgm-rev__timestamp {
    color: var(--gray-500) !important;
    font-size: 12px !important;
  }

  .jdgm-rev__body {
    color: var(--gray-700) !important;
    font-size: 14px !important;
    line-height: 1.8 !important;
  }

  .jdgm-rev__pics {
    margin-top: 16px !important;
  }

  .jdgm-rev__pic-img {
    border-radius: 8px !important;
  }

  .jdgm-paginate {
    margin-top: 24px !important;
  }

  .jdgm-paginate__page {
    background: var(--white) !important;
    border: 1px solid var(--gray-200) !important;
    border-radius: 6px !important;
    color: var(--black) !important;
  }

  .jdgm-paginate__page.jdgm-paginate__page--current {
    background: var(--black) !important;
    border-color: var(--black) !important;
    color: var(--white) !important;
  }

  /* レビューがない場合 */
  .naro-no-reviews {
    text-align: center;
    padding: 48px 24px;
    background: var(--white);
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.04);
  }

  @media (max-width: 768px) {
    .naro-no-reviews {
      padding: 32px 20px;
    }
  }

  .naro-no-reviews-icon {
    font-size: 48px;
    margin-bottom: 16px;
  }

  .naro-no-reviews-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  .naro-no-reviews-text {
    font-size: 14px;
    color: var(--gray-500);
    margin-bottom: 24px;
  }

  /* ===== FAQ SECTION ===== */
  .naro-faq {
    padding: 100px 20px;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-faq {
      padding: 64px 16px;
    }
  }

  .naro-section-label {
    font-size: 12px;
    letter-spacing: 0.2em;
    color: var(--gray-500);
    text-transform: uppercase;
    margin-bottom: 16px;
    text-align: center;
  }

  .naro-section-title {
    font-size: clamp(22px, 4vw, 32px);
    font-weight: 400;
    text-align: center;
    margin-bottom: 48px;
    line-height: 1.5;
  }

  @media (max-width: 768px) {
    .naro-section-title {
      font-size: 20px;
      margin-bottom: 32px;
    }
    .naro-section-label {
      font-size: 11px;
      margin-bottom: 12px;
    }
  }

  .naro-faq-list {
    max-width: 700px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  @media (max-width: 768px) {
    .naro-faq-list {
      gap: 12px;
    }
  }

  .naro-faq-item {
    background: var(--cream);
    border-radius: 12px;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .naro-faq-item {
      border-radius: 10px;
    }
  }

  .naro-faq-question {
    padding: 24px 28px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.2s ease;
  }

  @media (max-width: 768px) {
    .naro-faq-question {
      padding: 18px 20px;
      font-size: 14px;
    }
  }

  .naro-faq-question:hover {
    background: var(--gray-100);
  }

  .naro-faq-toggle {
    font-size: 24px;
    font-weight: 300;
    color: var(--gray-500);
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 12px;
  }

  @media (max-width: 768px) {
    .naro-faq-toggle {
      font-size: 20px;
    }
  }

  .naro-faq-item.open .naro-faq-toggle {
    transform: rotate(45deg);
  }

  .naro-faq-answer {
    display: none;
    padding: 0 28px 24px;
    font-size: 14px;
    line-height: 1.9;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-faq-answer {
      padding: 0 20px 18px;
      font-size: 13px;
    }
  }

  .naro-faq-item.open .naro-faq-answer {
    display: block;
  }

  /* ===== LIGHTBOX ===== */
  .naro-lightbox {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.95);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .naro-lightbox.active {
    display: flex;
    opacity: 1;
  }

  .naro-lightbox-image {
    max-width: 90%;
    max-height: 85vh;
    object-fit: contain;
    border-radius: 4px;
  }

  .naro-lightbox-close {
    position: absolute;
    top: 20px;
    right: 24px;
    background: none;
    border: none;
    color: white;
    font-size: 40px;
    cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.2s ease;
    line-height: 1;
    padding: 0;
  }

  .naro-lightbox-close:hover {
    opacity: 1;
  }

  .naro-lightbox-prev,
  .naro-lightbox-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.1);
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 16px 20px;
    border-radius: 4px;
    opacity: 0.8;
    transition: all 0.2s ease;
  }

  .naro-lightbox-prev:hover,
  .naro-lightbox-next:hover {
    opacity: 1;
    background: rgba(255,255,255,0.2);
  }

  .naro-lightbox-prev {
    left: 20px;
  }

  .naro-lightbox-next {
    right: 20px;
  }

  .naro-lightbox-counter {
    position: absolute;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    color: rgba(255,255,255,0.7);
    font-size: 14px;
  }

  @media (max-width: 768px) {
    .naro-lightbox-close {
      top: 12px;
      right: 16px;
      font-size: 32px;
    }
    .naro-lightbox-prev,
    .naro-lightbox-next {
      padding: 12px 16px;
      font-size: 20px;
    }
    .naro-lightbox-prev {
      left: 10px;
    }
    .naro-lightbox-next {
      right: 10px;
    }
  }

  /* ===== FIXED CTA BUTTON (MOBILE) ===== */
  .naro-fixed-cta {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--white);
    border-top: 1px solid var(--gray-200);
    padding: 12px 16px;
    z-index: 9998;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }

  .naro-fixed-cta.visible {
    transform: translateY(0);
  }

  @media (max-width: 768px) {
    .naro-fixed-cta {
      display: block;
    }
    
    .naro-lp {
      padding-bottom: 80px;
    }
  }

  .naro-fixed-cta-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 500px;
    margin: 0 auto;
    gap: 12px;
  }

  .naro-fixed-cta-price {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
  }

  .naro-fixed-cta-original {
    font-size: 13px;
    color: var(--gray-500);
    text-decoration: line-through;
  }

  .naro-fixed-cta-discount {
    font-size: 16px;
    font-weight: 600;
    color: var(--black);
  }

  .naro-fixed-cta-badge {
    background: #e53935;
    color: white;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
  }

  .naro-fixed-cta-button {
    display: inline-block;
    background: var(--black);
    color: var(--white);
    padding: 14px 24px;
    font-size: 14px;
    font-weight: 600;
    text-decoration: none;
    border-radius: 6px;
    white-space: nowrap;
    transition: all 0.3s ease;
  }

  .naro-fixed-cta-button:hover {
    background: var(--gray-700);
  }
</style>

<div class="naro-lp">
  
  <!-- HERO SECTION -->
  <section class="naro-hero">
    <div class="naro-hero-inner">
      <div class="naro-hero-image" onclick="openHeroLightbox()">
        <span class="naro-hero-badge">Before / After</span>
        <img src="{{ 'naro-before-after.png' | file_url }}" alt="naro Before After">
        <div class="naro-zoom-hint">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="M21 21l-4.35-4.35"></path>
            <path d="M11 8v6M8 11h6"></path>
          </svg>
        </div>
      </div>
      <div class="naro-hero-content">
        <p class="naro-hero-brand">naro</p>
        <h1 class="naro-hero-title">
          「Camel Toe Proof」<br>ご存知ですか？
        </h1>
        <p class="naro-hero-subtitle">
          レギンスの"あのライン"を防ぐインナー。<br>
          海外では常識、日本初上陸。
        </p>
        <div class="naro-hero-price">
          <span class="naro-hero-price-original">¥3,990</span>
          <span>¥2,990</span>
          <span class="naro-hero-price-badge">初回 ¥1,000 OFF</span>
        </div>
        <p class="naro-hero-price-note">※メール登録でクーポンGET</p>
        <a href="#product" class="naro-hero-cta">商品を見る</a>
      </div>
    </div>
  </section>

  <!-- DIFFERENCE SECTION -->
  <section class="naro-difference">
    <div class="naro-difference-inner">
      <h2 class="naro-difference-title animate-on-scroll">普通の下着と何が違う？</h2>
      <p class="naro-difference-subtitle animate-on-scroll">naroは、レギンス専用に設計されたインナーです。</p>
      
      <div class="naro-difference-table animate-on-scroll">
        <div class="naro-difference-column normal">
          <div class="naro-difference-column-title">普通の下着</div>
          <div class="naro-difference-list">
            <div class="naro-difference-item">
              <span class="naro-difference-icon">×</span>
              <span>股のラインがくっきり出る</span>
            </div>
            <div class="naro-difference-item">
              <span class="naro-difference-icon">×</span>
              <span>ヒップラインが透けて見える</span>
            </div>
            <div class="naro-difference-item">
              <span class="naro-difference-icon">×</span>
              <span>動くとズレて不快</span>
            </div>
          </div>
        </div>
        <div class="naro-difference-column naro">
          <div class="naro-difference-column-title">naro</div>
          <div class="naro-difference-list">
            <div class="naro-difference-item">
              <span class="naro-difference-icon">✓</span>
              <span>厚手のフラットフロント構造でカバー</span>
            </div>
            <div class="naro-difference-item">
              <span class="naro-difference-icon">✓</span>
              <span>ソングタイプで響かない</span>
            </div>
            <div class="naro-difference-item">
              <span class="naro-difference-icon">✓</span>
              <span>フィット設計でズレにくい</span>
            </div>
          </div>
        </div>
      </div>

      <div class="naro-difference-highlight animate-on-scroll">
        <p>naroのフロント部分は<strong>少し厚手の生地</strong>を使用。<br>だから、レギンス越しでもラインが出にくい。</p>
      </div>
    </div>
  </section>

  <!-- PRODUCT SECTION -->
  <section class="naro-product-section" id="product">
    <div class="naro-product-container">
      <!-- 画像ギャラリー -->
      <div class="naro-gallery">
        <div class="naro-main-image" onclick="openLightbox()">
          <img 
            id="mainImage"
            src="{{ product.featured_image | image_url: width: 1000 }}" 
            alt="{{ product.featured_image.alt | escape }}"
          >
          <div class="naro-zoom-hint">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="M21 21l-4.35-4.35"></path>
              <path d="M11 8v6M8 11h6"></path>
            </svg>
          </div>
        </div>
        
        {% if product.images.size > 1 %}
          <div class="naro-thumbnails">
            {% for image in product.images %}
              <div 
                class="naro-thumbnail {% if forloop.first %}active{% endif %}"
                onclick="changeImage('{{ image | image_url: width: 1000 }}', this)"
              >
                <img 
                  src="{{ image | image_url: width: 200 }}" 
                  alt="{{ image.alt | escape }}"
                >
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- 商品情報 -->
      <div class="naro-product-info">
        <p class="naro-product-brand">naro</p>
        <h2 class="naro-product-title">{{ product.title }}</h2>
        <p class="naro-product-price" id="product-price">¥{{ product.price | money_without_currency | remove: ',' }}</p>
        <p class="naro-price-per-item" id="price-per-item"></p>

        <form action="/cart/add" method="post">
          {% for option in product.options_with_values %}
            <div class="naro-option-group">
              <span class="naro-option-label">{{ option.name }}</span>
              <div class="naro-color-options">
                {% for value in option.values %}
                  {% if option.name == 'セット' or option.name == 'set' %}
                    <label class="naro-set-option {% if forloop.first %}selected{% endif %}">
                      <input 
                        type="radio" 
                        name="{{ option.name }}" 
                        value="{{ value }}"
                        {% if forloop.first %}checked{% endif %}
                        onchange="updateVariant()"
                      >
                      <span class="naro-set-name">
                        {{ value }}
                        {% if value == '2枚セット' %}<span class="naro-set-badge">12% OFF</span>{% endif %}
                        {% if value == '3枚セット' %}<span class="naro-set-badge">25% OFF</span>{% endif %}
                      </span>
                      <span class="naro-set-price">
                        {% if value == '1枚' %}¥3,990{% endif %}
                        {% if value == '2枚セット' %}¥6,980{% endif %}
                        {% if value == '3枚セット' %}¥8,970{% endif %}
                      </span>
                    </label>
                  {% else %}
                    <label class="naro-color-option {% if forloop.first %}selected{% endif %}">
                      <input 
                        type="radio" 
                        name="{{ option.name }}" 
                        value="{{ value }}"
                        {% if forloop.first %}checked{% endif %}
                        onchange="updateVariant()"
                      >
                      {{ value }}
                    </label>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% endfor %}
          
          <input type="hidden" name="id" id="variant-id" value="{{ product.selected_or_first_available_variant.id }}">
          
          <button type="submit" class="naro-add-to-cart" id="add-to-cart-btn" onclick="trackAddToCart()" {% unless product.available %}disabled{% endunless %}>
            {% if product.available %}
              カートに追加
            {% else %}
              売り切れ
            {% endif %}
          </button>
        </form>

        <div class="naro-benefits">
          <div class="naro-benefit">
            <span class="naro-benefit-icon">✓</span>
            2〜3営業日で発送
          </div>
          <div class="naro-benefit">
            <span class="naro-benefit-icon">✓</span>
            30日間返品保証
          </div>
          <div class="naro-benefit">
            <span class="naro-benefit-icon">✓</span>
            ¥5,000以上で送料無料
          </div>
        </div>

        <!-- 商品詳細（アコーディオン） -->
        <div class="naro-product-details">
          <div class="naro-details-accordion">
            <div class="naro-details-header" onclick="toggleDetails(this)">
              <span>商品詳細</span>
              <span class="naro-details-toggle">+</span>
            </div>
            <div class="naro-details-body">
              <p><strong>素材</strong>：ナイロン85%、ポリウレタン15%</p>
              <p><strong>カラー</strong>：ブラック / ベージュ</p>
              <p><strong>生産国</strong>：中国</p>
              <p class="naro-details-note">※軽やかな薄手生地を使用しているため、縫い目が若干斜めになっていたり、多少の歪みが見られる場合がございます。着用には問題ございませんが、あらかじめご了承ください。</p>
              <p class="naro-details-note">※モデル着用サイズ：L（ヒップ93cm、ウエスト63cm）</p>
            </div>
          </div>

          <div class="naro-details-accordion">
            <div class="naro-details-header" onclick="toggleDetails(this)">
              <span>サイズ</span>
              <span class="naro-details-toggle">+</span>
            </div>
            <div class="naro-details-body">
              <div class="naro-size-chart">
                <table>
                  <thead>
                    <tr>
                      <th></th>
                      <th>S</th>
                      <th>M</th>
                      <th>L</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>ウエスト</td>
                      <td>29</td>
                      <td>31</td>
                      <td>33</td>
                    </tr>
                    <tr>
                      <td>股上</td>
                      <td>18</td>
                      <td>19</td>
                      <td>20</td>
                    </tr>
                    <tr>
                      <td>サイド丈</td>
                      <td>35</td>
                      <td>35</td>
                      <td>35</td>
                    </tr>
                  </tbody>
                </table>
                <p class="naro-size-note">※単位：cm</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- REVIEWS SECTION -->
  <section class="naro-reviews" id="reviews">
    <div class="naro-reviews-inner">
      <div class="naro-reviews-header">
        <p class="naro-section-label animate-on-scroll">Reviews</p>
        <h2 class="naro-section-title animate-on-scroll" style="margin-bottom: 0;">お客様の声</h2>
        
        <div class="naro-reviews-summary animate-on-scroll">
          <div class="naro-reviews-score">
            <div class="naro-reviews-score-number">
              <span class="jdgm-prev-badge__stars" data-score="{{ product.metafields.judgeme.average_rating | default: '0.0' }}"></span>
            </div>
            <div class="naro-reviews-stars">
              <span class="star">★</span>
              <span class="star">★</span>
              <span class="star">★</span>
              <span class="star">★</span>
              <span class="star">★</span>
            </div>
            <p class="naro-reviews-count">{{ product.metafields.judgeme.review_count | default: 0 }}件のレビュー</p>
          </div>
          
          <div class="naro-reviews-divider"></div>
          
          <div class="naro-reviews-cta">
            <p>ご購入いただいた方へ</p>
            <button class="naro-write-review-btn" onclick="openJudgeMeForm()">レビューを書く</button>
          </div>
        </div>
      </div>
      
      <!-- Judge.me Widget -->
      <div class="naro-reviews-widget">
        <div class="jdgm-widget jdgm-review-widget" data-id="{{ product.id }}"></div>
      </div>
    </div>
  </section>

  <!-- FAQ SECTION -->
  <section class="naro-faq">
    <div class="naro-section-inner">
      <p class="naro-section-label animate-on-scroll">FAQ</p>
      <h2 class="naro-section-title animate-on-scroll">よくある質問</h2>
    </div>
    <div class="naro-faq-list">
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          サイズの選び方は？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          普段お使いの下着と同じサイズをお選びください。S/M/Lの3サイズ展開です。迷われた場合は、ワンサイズ大きめをおすすめします。
        </div>
      </div>
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          洗濯方法は？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          洗濯ネットに入れて、洗濯機で洗えます。乾燥機のご使用はお控えください。長くお使いいただくために、手洗いをおすすめします。
        </div>
      </div>
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          返品・交換はできますか？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          未使用・未開封の場合、商品到着から30日以内であれば返品・交換を承ります。サイズが合わない場合もお気軽にご連絡ください。
        </div>
      </div>
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          配送にはどれくらいかかりますか？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          ご注文から2〜3営業日で発送いたします。発送後、通常1〜3日でお届けします。
        </div>
      </div>
    </div>
  </section>

  <!-- LIGHTBOX -->
  <div class="naro-lightbox" id="lightbox">
    <button class="naro-lightbox-close" onclick="closeLightbox()">&times;</button>
    <button class="naro-lightbox-prev" onclick="prevImage(event)">&#10094;</button>
    <button class="naro-lightbox-next" onclick="nextImage(event)">&#10095;</button>
    <img class="naro-lightbox-image" id="lightboxImage" src="" alt="" onclick="event.stopPropagation()">
    <div class="naro-lightbox-counter" id="lightboxCounter"></div>
  </div>

  <!-- FIXED CTA BUTTON (MOBILE) -->
  <div class="naro-fixed-cta" id="fixedCta">
    <div class="naro-fixed-cta-inner">
      <div class="naro-fixed-cta-price">
        <span class="naro-fixed-cta-original">¥3,990</span>
        <span class="naro-fixed-cta-discount">→ ¥2,990</span>
        <span class="naro-fixed-cta-badge">¥1,000 OFF</span>
      </div>
      <a href="#product" class="naro-fixed-cta-button">今すぐ購入</a>
    </div>
  </div>

</div>

<script>
  // スクロールアニメーション
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.animate-on-scroll').forEach(el => {
    observer.observe(el);
  });

  // 画像切り替え
  function changeImage(src, element) {
    document.getElementById('mainImage').src = src;
    document.querySelectorAll('.naro-thumbnail').forEach(el => el.classList.remove('active'));
    element.classList.add('active');
  }

  // ライトボックス
  const productImages = [
    {% for image in product.images %}
      '{{ image | image_url: width: 1500 }}'{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];
  let currentImageIndex = 0;

  function openLightbox() {
    const mainImageSrc = document.getElementById('mainImage').src;
    currentImageIndex = productImages.findIndex(img => mainImageSrc.includes(img.split('?')[0].split('/').pop().split('.')[0]));
    if (currentImageIndex === -1) currentImageIndex = 0;
    
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightboxImage');
    
    lightboxImage.src = productImages[currentImageIndex];
    updateCounter();
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    const counter = document.getElementById('lightboxCounter');
    const prevBtn = document.querySelector('.naro-lightbox-prev');
    const nextBtn = document.querySelector('.naro-lightbox-next');
    
    lightbox.classList.remove('active');
    document.body.style.overflow = '';
    
    counter.style.display = '';
    prevBtn.style.display = '';
    nextBtn.style.display = '';
  }

  function prevImage(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    currentImageIndex = (currentImageIndex - 1 + productImages.length) % productImages.length;
    document.getElementById('lightboxImage').src = productImages[currentImageIndex];
    updateCounter();
  }

  function nextImage(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    currentImageIndex = (currentImageIndex + 1) % productImages.length;
    document.getElementById('lightboxImage').src = productImages[currentImageIndex];
    updateCounter();
  }

  function updateCounter() {
    document.getElementById('lightboxCounter').textContent = (currentImageIndex + 1) + ' / ' + productImages.length;
  }

  document.getElementById('lightbox').addEventListener('click', function(e) {
    if (e.target === this) {
      closeLightbox();
    }
  });

  document.addEventListener('keydown', function(e) {
    const lightbox = document.getElementById('lightbox');
    if (!lightbox.classList.contains('active')) return;
    
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft') prevImage(null);
    if (e.key === 'ArrowRight') nextImage(null);
  });

  function openHeroLightbox() {
    const heroImage = document.querySelector('.naro-hero-image img');
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightboxImage');
    const counter = document.getElementById('lightboxCounter');
    const prevBtn = document.querySelector('.naro-lightbox-prev');
    const nextBtn = document.querySelector('.naro-lightbox-next');
    
    lightboxImage.src = heroImage.src;
    counter.style.display = 'none';
    prevBtn.style.display = 'none';
    nextBtn.style.display = 'none';
    
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  // FAQ開閉
  function toggleFaq(element) {
    const item = element.parentElement;
    item.classList.toggle('open');
  }

  // 商品詳細アコーディオン開閉
  function toggleDetails(element) {
    const accordion = element.parentElement;
    accordion.classList.toggle('open');
  }

  // Judge.me レビューフォームを開く
  function openJudgeMeForm() {
    // Judge.meのレビューフォームを開くトリガー
    if (typeof jdgm !== 'undefined' && jdgm.reviewForm) {
      jdgm.reviewForm.open();
    } else {
      // フォールバック: ウィジェット内の「レビューを書く」をクリック
      const writeReviewBtn = document.querySelector('.jdgm-write-rev-link, .jdgm-rev-widg__write-rev-link, [data-jdgm-write-rev]');
      if (writeReviewBtn) {
        writeReviewBtn.click();
      } else {
        // 最終フォールバック: レビューセクションにスクロール
        document.getElementById('reviews').scrollIntoView({ behavior: 'smooth' });
      }
    }
  }

  // バリアント更新
  const productVariants = {{ product.variants | json }};

  function updateVariant() {
    const selectedOptions = [];
    
    document.querySelectorAll('.naro-color-options input:checked').forEach(input => {
      selectedOptions.push(input.value);
    });

    const selectedVariant = productVariants.find(variant => {
      return selectedOptions.every((option, index) => {
        return variant.options[index] === option;
      });
    });

    if (selectedVariant) {
      document.getElementById('variant-id').value = selectedVariant.id;
      
      const price = selectedVariant.price / 100;
      document.getElementById('product-price').innerHTML = '¥' + price.toLocaleString();
      
      const pricePerItem = document.getElementById('price-per-item');
      const setOption = selectedOptions.find(opt => opt.includes('枚'));
      
      if (setOption === '2枚セット') {
        const perItem = Math.round(price / 2);
        pricePerItem.innerHTML = '1枚あたり ¥' + perItem.toLocaleString() + ' <span class="naro-discount-badge">12% OFF</span>';
      } else if (setOption === '3枚セット') {
        const perItem = Math.round(price / 3);
        pricePerItem.innerHTML = '1枚あたり ¥' + perItem.toLocaleString() + ' <span class="naro-discount-badge">25% OFF</span>';
      } else {
        pricePerItem.innerHTML = '';
      }
      
      document.querySelectorAll('.naro-color-option, .naro-set-option').forEach(label => {
        const input = label.querySelector('input');
        if (input && input.checked) {
          label.classList.add('selected');
        } else {
          label.classList.remove('selected');
        }
      });
      
      const btn = document.getElementById('add-to-cart-btn');
      if (selectedVariant.available) {
        btn.disabled = false;
        btn.textContent = 'カートに追加';
      } else {
        btn.disabled = true;
        btn.textContent = '売り切れ';
      }
    }
  }

  // Meta Pixel - Add to Cart イベント
  function trackAddToCart() {
    const selectedOptions = [];
    
    document.querySelectorAll('.naro-color-options input:checked').forEach(input => {
      selectedOptions.push(input.value);
    });

    const selectedVariant = productVariants.find(variant => {
      return selectedOptions.every((option, index) => {
        return variant.options[index] === option;
      });
    });

    if (selectedVariant && typeof fbq !== 'undefined') {
      fbq('track', 'AddToCart', {
        content_name: '{{ product.title }}',
        content_ids: [selectedVariant.id.toString()],
        content_type: 'product',
        value: selectedVariant.price / 100,
        currency: 'JPY'
      });
    }
  }

  // 初期表示時に価格を更新
  document.addEventListener('DOMContentLoaded', function() {
    updateVariant();
  });

  // スムーズスクロール
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

  // 固定CTAボタンの表示制御
  (function() {
    const fixedCta = document.getElementById('fixedCta');
    const heroSection = document.querySelector('.naro-hero');
    const productSection = document.getElementById('product');
    
    if (!fixedCta || !heroSection) return;

    function checkScroll() {
      const heroBottom = heroSection.getBoundingClientRect().bottom;
      const productTop = productSection ? productSection.getBoundingClientRect().top : Infinity;
      const windowHeight = window.innerHeight;
      
      if (heroBottom < 0 && productTop > windowHeight * 0.5) {
        fixedCta.classList.add('visible');
      } else {
        fixedCta.classList.remove('visible');
      }
    }

    let ticking = false;
    window.addEventListener('scroll', function() {
      if (!ticking) {
        window.requestAnimationFrame(function() {
          checkScroll();
          ticking = false;
        });
        ticking = true;
      }
    });

    checkScroll();
  })();
</script>

{% schema %}
{
  "name": "naro LP Product v8",
  "settings": [],
  "presets": [
    {
      "name": "naro LP Product v8"
    }
  ]
}
{% endschema %}
