{% comment %}
  naro - LP風商品ページ v4
  v1の配色 + ゴシック体 + スクロールアニメーション
{% endcomment %}

<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap');
  
  :root {
    --black: #1a1a1a;
    --white: #ffffff;
    --cream: #faf9f7;
    --gray-100: #f5f5f5;
    --gray-200: #e8e8e8;
    --gray-500: #666666;
    --gray-700: #404040;
  }

  .naro-lp * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .naro-lp {
    font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--black);
    line-height: 1.8;
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
    background: var(--white);
  }

  /* ===== ANIMATIONS ===== */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* ===== HERO ===== */
  .naro-hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    background: linear-gradient(180deg, var(--cream) 0%, var(--white) 100%);
    padding: 100px 24px 80px;
  }

  .naro-hero-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
  }

  @media (max-width: 900px) {
    .naro-hero-inner {
      grid-template-columns: 1fr;
      gap: 32px;
    }
    .naro-hero {
      min-height: auto;
      padding: 70px 16px 48px;
    }
    .naro-hero-image {
      order: -1;
    }
    .naro-hero-badge {
      top: 12px;
      left: 12px;
      padding: 6px 12px;
      font-size: 9px;
    }
    .naro-hero-content {
      padding: 0;
      text-align: center;
    }
    .naro-hero-brand {
      font-size: 12px;
      margin-bottom: 12px;
    }
    .naro-hero-title {
      font-size: 26px;
      margin-bottom: 16px;
    }
    .naro-hero-subtitle {
      font-size: 14px;
      margin-bottom: 24px;
      line-height: 1.8;
    }
    .naro-hero-subtitle br {
      display: none;
    }
    .naro-hero-price {
      font-size: 28px;
      margin-bottom: 20px;
    }
    .naro-hero-cta {
      width: 100%;
      text-align: center;
      padding: 16px 32px;
    }
  }

  .naro-hero-image {
    position: relative;
    cursor: zoom-in;
  }

  .naro-hero-image > .naro-zoom-hint {
    position: absolute;
    bottom: 16px;
    right: 16px;
  }

  .naro-hero-image img {
    width: 100%;
    border-radius: 8px;
    box-shadow: 0 30px 60px rgba(0,0,0,0.1);
  }

  .naro-hero-badge {
    position: absolute;
    top: 16px;
    left: 16px;
    background: var(--black);
    color: var(--white);
    padding: 8px 16px;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    border-radius: 4px;
  }

  .naro-hero-content {
    padding: 20px 0;
  }

  .naro-hero-brand {
    font-size: 14px;
    letter-spacing: 0.2em;
    color: var(--gray-500);
    margin-bottom: 20px;
    text-transform: uppercase;
  }

  .naro-hero-title {
    font-size: clamp(28px, 5vw, 42px);
    font-weight: 300;
    line-height: 1.4;
    margin-bottom: 24px;
  }

  .naro-hero-title strong {
    font-weight: 600;
    display: block;
  }

  .naro-hero-subtitle {
    font-size: 16px;
    color: var(--gray-500);
    margin-bottom: 32px;
    line-height: 1.9;
  }

  .naro-hero-price {
    font-size: 32px;
    font-weight: 500;
    margin-bottom: 24px;
  }

  .naro-hero-price small {
    font-size: 14px;
    font-weight: 400;
    color: var(--gray-500);
    margin-left: 8px;
  }

  .naro-hero-cta {
    display: inline-block;
    background: var(--black);
    color: var(--white);
    padding: 18px 48px;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.3s ease;
  }

  .naro-hero-cta:hover {
    background: var(--gray-700);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }

  /* ===== SECTION COMMON ===== */
  .naro-section-inner {
    max-width: 900px;
    margin: 0 auto;
  }

  .naro-section-label {
    font-size: 12px;
    letter-spacing: 0.2em;
    color: var(--gray-500);
    text-transform: uppercase;
    margin-bottom: 16px;
    text-align: center;
  }

  .naro-section-title {
    font-size: clamp(24px, 4vw, 36px);
    font-weight: 400;
    text-align: center;
    margin-bottom: 60px;
    line-height: 1.5;
  }

  /* ===== PROBLEM SECTION ===== */
  .naro-problem {
    padding: 120px 20px;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-problem {
      padding: 64px 16px;
    }
    .naro-section-title {
      font-size: 22px;
      margin-bottom: 40px;
    }
    .naro-section-label {
      font-size: 11px;
      margin-bottom: 12px;
    }
  }

  /* ===== CAMEL TOE PROOF SECTION ===== */
  .naro-ctp-section {
    padding: 120px 20px;
    background: var(--black);
    color: var(--white);
    text-align: center;
  }

  @media (max-width: 768px) {
    .naro-ctp-section {
      padding: 64px 16px;
    }
  }

  .naro-ctp-section .naro-section-label {
    color: rgba(255,255,255,0.6);
  }

  .naro-ctp-title {
    font-size: clamp(24px, 4vw, 36px);
    font-weight: 500;
    line-height: 1.5;
    margin-bottom: 40px;
  }

  @media (max-width: 768px) {
    .naro-ctp-title {
      font-size: 22px;
      margin-bottom: 32px;
    }
    .naro-ctp-title br {
      display: none;
    }
  }

  .naro-ctp-content {
    max-width: 600px;
    margin: 0 auto;
    font-size: 16px;
    line-height: 2;
    color: rgba(255,255,255,0.8);
  }

  @media (max-width: 768px) {
    .naro-ctp-content {
      font-size: 14px;
      line-height: 1.9;
    }
  }

  .naro-ctp-content p {
    margin-bottom: 8px;
  }

  .naro-ctp-highlight {
    margin-top: 24px;
    font-weight: 600;
    color: var(--white);
    font-size: 18px;
  }

  @media (max-width: 768px) {
    .naro-ctp-highlight {
      font-size: 16px;
      margin-top: 20px;
    }
  }

  .naro-problem-list {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  @media (max-width: 768px) {
    .naro-problem-list {
      gap: 16px;
    }
  }

  .naro-problem-item {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    padding: 28px 32px;
    background: var(--cream);
    border-radius: 12px;
    transition: transform 0.3s ease;
  }

  @media (max-width: 768px) {
    .naro-problem-item {
      padding: 20px;
      gap: 16px;
      border-radius: 10px;
    }
    .naro-problem-item:hover {
      transform: none;
    }
  }

  .naro-problem-item:hover {
    transform: translateX(8px);
  }

  .naro-problem-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    background: var(--white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 600;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-problem-icon {
      width: 40px;
      height: 40px;
      font-size: 12px;
    }
  }

  .naro-problem-text {
    font-size: 15px;
    line-height: 1.8;
  }

  .naro-problem-text strong {
    font-weight: 600;
    display: block;
    margin-bottom: 4px;
    font-size: 16px;
  }

  @media (max-width: 768px) {
    .naro-problem-text {
      font-size: 14px;
    }
    .naro-problem-text strong {
      font-size: 15px;
    }
  }

  /* ===== SOLUTION SECTION ===== */
  .naro-solution {
    padding: 120px 20px;
    background: var(--cream);
  }

  @media (max-width: 768px) {
    .naro-solution {
      padding: 64px 16px;
    }
  }

  .naro-solution-inner {
    max-width: 1100px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
  }

  @media (max-width: 900px) {
    .naro-solution-inner {
      grid-template-columns: 1fr;
      gap: 40px;
    }
  }

  @media (max-width: 768px) {
    .naro-solution-inner {
      gap: 32px;
    }
  }

  .naro-solution-image {
    max-width: 500px;
    margin: 0 auto;
  }

  .naro-solution-image img {
    width: 100%;
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
  }

  @media (max-width: 768px) {
    .naro-solution-image img {
      border-radius: 10px;
    }
  }

  .naro-solution-content .naro-section-label {
    text-align: left;
  }

  .naro-solution-content .naro-section-title {
    text-align: left;
    margin-bottom: 24px;
  }

  @media (max-width: 768px) {
    .naro-solution-content .naro-section-label {
      text-align: center;
    }
    .naro-solution-content .naro-section-title {
      text-align: center;
      font-size: 22px;
      margin-bottom: 20px;
    }
  }

  .naro-solution-text {
    font-size: 16px;
    line-height: 2;
    color: var(--gray-500);
    margin-bottom: 32px;
  }

  @media (max-width: 768px) {
    .naro-solution-text {
      font-size: 14px;
      line-height: 1.9;
      margin-bottom: 24px;
      text-align: center;
    }
  }

  .naro-solution-features {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  @media (max-width: 768px) {
    .naro-solution-features {
      gap: 12px;
    }
  }

  .naro-solution-feature {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 14px;
  }

  @media (max-width: 768px) {
    .naro-solution-feature {
      gap: 12px;
      font-size: 13px;
    }
  }

  .naro-solution-feature-icon {
    width: 36px;
    height: 36px;
    border: 1px solid var(--gray-200);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    background: var(--white);
    flex-shrink: 0;
  }

  @media (max-width: 768px) {
    .naro-solution-feature-icon {
      width: 32px;
      height: 32px;
      font-size: 11px;
    }
  }

  /* ===== FEATURES SECTION ===== */
  .naro-features {
    padding: 120px 20px;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-features {
      padding: 64px 16px;
    }
  }

  .naro-features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 40px;
    max-width: 1000px;
    margin: 0 auto;
  }

  @media (max-width: 768px) {
    .naro-features-grid {
      grid-template-columns: 1fr;
      gap: 20px;
    }
  }

  .naro-feature-card {
    text-align: center;
    padding: 40px 24px;
    background: var(--cream);
    border-radius: 16px;
    transition: transform 0.3s ease;
  }

  @media (max-width: 768px) {
    .naro-feature-card {
      padding: 28px 20px;
      border-radius: 12px;
    }
    .naro-feature-card:hover {
      transform: none;
    }
  }

  .naro-feature-card:hover {
    transform: translateY(-8px);
  }

  .naro-feature-icon {
    width: 72px;
    height: 72px;
    margin: 0 auto 24px;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    transition: all 0.3s ease;
  }

  @media (max-width: 768px) {
    .naro-feature-icon {
      width: 56px;
      height: 56px;
      margin-bottom: 16px;
      font-size: 20px;
    }
  }

  .naro-feature-card:hover .naro-feature-icon {
    background: var(--black);
    border-color: var(--black);
    color: var(--white);
  }

  .naro-feature-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 12px;
  }

  @media (max-width: 768px) {
    .naro-feature-title {
      font-size: 16px;
      margin-bottom: 8px;
    }
  }

  .naro-feature-desc {
    font-size: 14px;
    color: var(--gray-500);
    line-height: 1.8;
  }

  @media (max-width: 768px) {
    .naro-feature-desc {
      font-size: 13px;
      line-height: 1.7;
    }
  }

  /* ===== SCENES SECTION ===== */
  .naro-scenes {
    padding: 120px 20px;
    background: var(--cream);
  }

  @media (max-width: 768px) {
    .naro-scenes {
      padding: 64px 16px;
    }
  }

  .naro-scenes-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
    max-width: 1000px;
    margin: 0 auto;
  }

  @media (max-width: 768px) {
    .naro-scenes-grid {
      grid-template-columns: 1fr;
      gap: 16px;
    }
  }

  .naro-scene-card {
    background: var(--white);
    border-radius: 16px;
    padding: 40px 24px;
    text-align: center;
    transition: box-shadow 0.3s ease;
  }

  @media (max-width: 768px) {
    .naro-scene-card {
      padding: 28px 20px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      text-align: left;
      gap: 16px;
    }
  }

  .naro-scene-card:hover {
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
  }

  .naro-scene-icon {
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--gray-500);
    margin-bottom: 16px;
    text-transform: uppercase;
  }

  @media (max-width: 768px) {
    .naro-scene-icon {
      font-size: 12px;
      margin-bottom: 0;
      flex-shrink: 0;
      width: 48px;
    }
  }

  .naro-scene-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  @media (max-width: 768px) {
    .naro-scene-title {
      font-size: 16px;
      margin-bottom: 4px;
    }
  }

  .naro-scene-desc {
    font-size: 14px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-scene-desc {
      font-size: 13px;
    }
  }

  /* ===== PRODUCT SECTION ===== */
  .naro-product-section {
    padding: 120px 20px;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-product-section {
      padding: 64px 16px;
    }
  }

  .naro-product-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    max-width: 1200px;
    margin: 0 auto;
    align-items: start;
  }

  @media (max-width: 900px) {
    .naro-product-container {
      grid-template-columns: 1fr;
      gap: 40px;
    }
  }

  @media (max-width: 768px) {
    .naro-product-container {
      gap: 32px;
    }
  }

  .naro-gallery {
    display: flex;
    flex-direction: column;
    gap: 16px;
    position: sticky;
    top: 100px;
  }

  @media (max-width: 900px) {
    .naro-gallery {
      position: relative;
      top: 0;
      gap: 12px;
    }
  }

  .naro-main-image {
    width: 100%;
    aspect-ratio: 1;
    overflow: hidden;
    background: var(--gray-100);
    border-radius: 12px;
  }

  @media (max-width: 768px) {
    .naro-main-image {
      border-radius: 10px;
    }
  }

  .naro-main-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .naro-thumbnails {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 12px;
  }

  @media (max-width: 768px) {
    .naro-thumbnails {
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }
  }

  .naro-thumbnail {
    aspect-ratio: 1;
    overflow: hidden;
    border-radius: 8px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
    background: var(--gray-100);
  }

  @media (max-width: 768px) {
    .naro-thumbnail {
      border-radius: 6px;
    }
  }

  .naro-thumbnail:hover,
  .naro-thumbnail.active {
    border-color: var(--black);
  }

  .naro-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .naro-product-info {
    padding: 20px 0;
  }

  @media (max-width: 768px) {
    .naro-product-info {
      padding: 0;
    }
  }

  .naro-product-brand {
    font-size: 13px;
    letter-spacing: 0.15em;
    color: var(--gray-500);
    margin-bottom: 12px;
    text-transform: uppercase;
  }

  @media (max-width: 768px) {
    .naro-product-brand {
      font-size: 11px;
      margin-bottom: 8px;
    }
  }

  .naro-product-title {
    font-size: 28px;
    font-weight: 500;
    margin-bottom: 16px;
  }

  @media (max-width: 768px) {
    .naro-product-title {
      font-size: 22px;
      margin-bottom: 12px;
    }
  }

  .naro-product-price {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  @media (max-width: 768px) {
    .naro-product-price {
      font-size: 26px;
    }
  }

  .naro-price-per-item {
    font-size: 14px;
    color: var(--gray-500);
    margin-bottom: 32px;
    min-height: 20px;
  }

  @media (max-width: 768px) {
    .naro-price-per-item {
      font-size: 13px;
      margin-bottom: 24px;
    }
  }

  .naro-discount-badge {
    display: inline-block;
    background: #e8f5e9;
    color: #2e7d32;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    margin-left: 8px;
  }

  @media (max-width: 768px) {
    .naro-discount-badge {
      font-size: 11px;
      padding: 2px 6px;
    }
  }

  .naro-option-group {
    margin-bottom: 28px;
  }

  @media (max-width: 768px) {
    .naro-option-group {
      margin-bottom: 24px;
    }
  }

  .naro-option-label {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 12px;
    display: block;
  }

  @media (max-width: 768px) {
    .naro-option-label {
      font-size: 12px;
      margin-bottom: 10px;
    }
  }

  .naro-color-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  @media (max-width: 768px) {
    .naro-color-options {
      gap: 8px;
    }
  }

  .naro-color-option {
    padding: 12px 24px;
    border: 1.5px solid var(--gray-200);
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s ease;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-color-option {
      padding: 10px 20px;
      font-size: 13px;
      border-radius: 6px;
    }
  }

  .naro-color-option:hover {
    border-color: var(--gray-500);
  }

  .naro-color-option.selected,
  .naro-color-option:has(input:checked) {
    border-color: var(--black);
    background: var(--black);
    color: var(--white);
  }

  .naro-color-option input {
    display: none;
  }

  .naro-set-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  @media (max-width: 768px) {
    .naro-set-options {
      gap: 10px;
    }
  }

  .naro-set-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border: 1.5px solid var(--gray-200);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: var(--white);
  }

  @media (max-width: 768px) {
    .naro-set-option {
      padding: 14px 16px;
      border-radius: 6px;
    }
  }

  .naro-set-option:hover {
    border-color: var(--gray-500);
  }

  .naro-set-option.selected,
  .naro-set-option:has(input:checked) {
    border-color: var(--black);
    background: var(--cream);
  }

  .naro-set-option input {
    display: none;
  }

  .naro-set-name {
    font-weight: 600;
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
  }

  @media (max-width: 768px) {
    .naro-set-name {
      font-size: 14px;
      gap: 6px;
    }
  }

  .naro-set-badge {
    background: var(--black);
    color: var(--white);
    padding: 2px 8px;
    font-size: 10px;
    font-weight: 600;
    border-radius: 4px;
  }

  @media (max-width: 768px) {
    .naro-set-badge {
      font-size: 9px;
      padding: 2px 6px;
    }
  }

  .naro-set-price {
    font-size: 14px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-set-price {
      font-size: 13px;
    }
  }

  .naro-add-to-cart {
    width: 100%;
    padding: 20px;
    background: var(--black);
    color: var(--white);
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: inherit;
  }

  @media (max-width: 768px) {
    .naro-add-to-cart {
      padding: 18px;
      font-size: 14px;
      border-radius: 6px;
    }
  }

  .naro-add-to-cart:hover {
    background: var(--gray-700);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }

  .naro-add-to-cart:disabled {
    background: var(--gray-500);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .naro-benefits {
    margin-top: 32px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  @media (max-width: 768px) {
    .naro-benefits {
      margin-top: 24px;
      gap: 10px;
    }
  }

  .naro-benefit {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-benefit {
      font-size: 13px;
      gap: 10px;
    }
  }

  .naro-benefit-icon {
    color: #2e7d32;
    font-size: 16px;
  }

  /* ===== PRODUCT DETAILS ACCORDION ===== */
  .naro-product-details {
    margin-top: 32px;
    border-top: 1px solid var(--gray-200);
    padding-top: 24px;
  }

  @media (max-width: 768px) {
    .naro-product-details {
      margin-top: 24px;
      padding-top: 20px;
    }
  }

  .naro-details-accordion {
    background: var(--white);
  }

  .naro-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    padding: 8px 0;
  }

  .naro-details-header:hover {
    color: var(--gray-500);
  }

  .naro-details-toggle {
    font-size: 20px;
    font-weight: 300;
    color: var(--gray-500);
    transition: transform 0.3s ease;
  }

  .naro-details-accordion.open .naro-details-toggle {
    transform: rotate(45deg);
  }

  .naro-details-body {
    display: none;
    padding-top: 16px;
    font-size: 13px;
    line-height: 1.9;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-details-body {
      font-size: 12px;
    }
  }

  .naro-details-accordion.open .naro-details-body {
    display: block;
  }

  .naro-details-body p {
    margin-bottom: 8px;
  }

  .naro-details-body .naro-details-note {
    font-size: 12px;
    margin-top: 12px;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-details-body .naro-details-note {
      font-size: 11px;
    }
  }

  /* ===== SIZE CHART ===== */
  .naro-size-chart {
    margin: 20px 0;
  }

  .naro-size-chart p {
    margin-bottom: 12px;
  }

  .naro-size-chart table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  @media (max-width: 768px) {
    .naro-size-chart table {
      font-size: 12px;
    }
  }

  .naro-size-chart th,
  .naro-size-chart td {
    padding: 10px 12px;
    text-align: center;
    border-bottom: 1px solid var(--gray-200);
  }

  .naro-size-chart th {
    font-weight: 600;
    color: var(--black);
    background: var(--gray-100);
  }

  .naro-size-chart td:first-child {
    text-align: left;
    font-weight: 500;
    color: var(--black);
  }

  .naro-size-chart tbody tr:last-child td {
    border-bottom: none;
  }

  .naro-size-chart .naro-size-note {
    font-size: 12px;
    color: var(--gray-500);
    margin-top: 12px;
  }

  /* ===== ZOOM HINT ===== */
  .naro-main-image {
    position: relative;
    cursor: zoom-in;
  }

  .naro-zoom-hint {
    position: absolute;
    bottom: 12px;
    right: 12px;
    background: rgba(255,255,255,0.9);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--black);
    opacity: 0.7;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .naro-main-image:hover .naro-zoom-hint {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .naro-zoom-hint {
      width: 36px;
      height: 36px;
      bottom: 10px;
      right: 10px;
    }
    .naro-zoom-hint svg {
      width: 18px;
      height: 18px;
    }
  }

  /* ===== LIGHTBOX ===== */
  .naro-lightbox {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.95);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .naro-lightbox.active {
    display: flex;
    opacity: 1;
  }

  .naro-lightbox-image {
    max-width: 90%;
    max-height: 85vh;
    object-fit: contain;
    border-radius: 4px;
  }

  .naro-lightbox-close {
    position: absolute;
    top: 20px;
    right: 24px;
    background: none;
    border: none;
    color: white;
    font-size: 40px;
    cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.2s ease;
    line-height: 1;
    padding: 0;
  }

  .naro-lightbox-close:hover {
    opacity: 1;
  }

  .naro-lightbox-prev,
  .naro-lightbox-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.1);
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 16px 20px;
    border-radius: 4px;
    opacity: 0.8;
    transition: all 0.2s ease;
  }

  .naro-lightbox-prev:hover,
  .naro-lightbox-next:hover {
    opacity: 1;
    background: rgba(255,255,255,0.2);
  }

  .naro-lightbox-prev {
    left: 20px;
  }

  .naro-lightbox-next {
    right: 20px;
  }

  .naro-lightbox-counter {
    position: absolute;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    color: rgba(255,255,255,0.7);
    font-size: 14px;
  }

  @media (max-width: 768px) {
    .naro-lightbox-close {
      top: 12px;
      right: 16px;
      font-size: 32px;
    }
    .naro-lightbox-prev,
    .naro-lightbox-next {
      padding: 12px 16px;
      font-size: 20px;
    }
    .naro-lightbox-prev {
      left: 10px;
    }
    .naro-lightbox-next {
      right: 10px;
    }
  }

  /* ===== FAQ SECTION ===== */
  .naro-faq {
    padding: 120px 20px;
    background: var(--cream);
  }

  @media (max-width: 768px) {
    .naro-faq {
      padding: 64px 16px;
    }
  }

  .naro-faq-list {
    max-width: 700px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  @media (max-width: 768px) {
    .naro-faq-list {
      gap: 12px;
    }
  }

  .naro-faq-item {
    background: var(--white);
    border-radius: 12px;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .naro-faq-item {
      border-radius: 10px;
    }
  }

  .naro-faq-question {
    padding: 24px 28px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.2s ease;
  }

  @media (max-width: 768px) {
    .naro-faq-question {
      padding: 18px 20px;
      font-size: 14px;
    }
  }

  .naro-faq-question:hover {
    background: var(--gray-100);
  }

  .naro-faq-toggle {
    font-size: 24px;
    font-weight: 300;
    color: var(--gray-500);
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 12px;
  }

  @media (max-width: 768px) {
    .naro-faq-toggle {
      font-size: 20px;
    }
  }

  .naro-faq-item.open .naro-faq-toggle {
    transform: rotate(45deg);
  }

  .naro-faq-answer {
    display: none;
    padding: 0 28px 24px;
    font-size: 14px;
    line-height: 1.9;
    color: var(--gray-500);
  }

  @media (max-width: 768px) {
    .naro-faq-answer {
      padding: 0 20px 18px;
      font-size: 13px;
    }
  }

  .naro-faq-item.open .naro-faq-answer {
    display: block;
  }

  /* ===== FINAL CTA SECTION ===== */
  .naro-final-cta {
    padding: 120px 20px;
    background: var(--black);
    color: var(--white);
    text-align: center;
  }

  @media (max-width: 768px) {
    .naro-final-cta {
      padding: 64px 16px;
    }
  }

  .naro-final-cta-title {
    font-size: clamp(24px, 4vw, 36px);
    font-weight: 400;
    margin-bottom: 16px;
  }

  @media (max-width: 768px) {
    .naro-final-cta-title {
      font-size: 24px;
      margin-bottom: 12px;
    }
  }

  .naro-final-cta-subtitle {
    font-size: 16px;
    color: rgba(255,255,255,0.7);
    margin-bottom: 40px;
  }

  @media (max-width: 768px) {
    .naro-final-cta-subtitle {
      font-size: 14px;
      margin-bottom: 32px;
    }
  }

  .naro-final-cta-button {
    display: inline-block;
    background: var(--white);
    color: var(--black);
    padding: 20px 60px;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.3s ease;
  }

  @media (max-width: 768px) {
    .naro-final-cta-button {
      padding: 16px 48px;
      font-size: 14px;
      border-radius: 6px;
    }
  }

  .naro-final-cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 40px rgba(255,255,255,0.2);
  }
</style>

<div class="naro-lp">
  
  <!-- HERO SECTION -->
  <section class="naro-hero">
    <div class="naro-hero-inner">
      <div class="naro-hero-image" onclick="openHeroLightbox()">
        <span class="naro-hero-badge">Before / After</span>
        <img src="{{ 'naro-before-after.png' | file_url }}" alt="naro Before After">
        <div class="naro-zoom-hint">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="M21 21l-4.35-4.35"></path>
            <path d="M11 8v6M8 11h6"></path>
          </svg>
        </div>
      </div>
      <div class="naro-hero-content">
        <p class="naro-hero-brand">naro</p>
        <h1 class="naro-hero-title">
          レギンスの下、<br>
          <strong>気になっていませんか？</strong>
        </h1>
        <p class="naro-hero-subtitle">
          ヨガやジムでレギンスを履くとき、<br>
          股のラインが気になって集中できない。<br><br>
          <strong>海外で当たり前の「Camel Toe Proof」設計。</strong><br>
          naroが、日本に届けます。
        </p>
        <p class="naro-hero-price">¥3,990 <small>税込</small></p>
        <a href="#product" class="naro-hero-cta">商品を見る</a>
      </div>
    </div>
  </section>

  <!-- PROBLEM SECTION -->
  <section class="naro-problem">
    <div class="naro-section-inner">
      <p class="naro-section-label animate-on-scroll">Problem</p>
      <h2 class="naro-section-title animate-on-scroll">こんな経験、ありませんか？</h2>
      <div class="naro-problem-list">
        <div class="naro-problem-item animate-on-scroll">
          <div class="naro-problem-icon">01</div>
          <div class="naro-problem-text">
            <strong>股のラインが気になる</strong>
            レギンスを履くと、股の部分がくっきり。周りの目が気になって、ポーズに集中できない。
          </div>
        </div>
        <div class="naro-problem-item animate-on-scroll">
          <div class="naro-problem-icon">02</div>
          <div class="naro-problem-text">
            <strong>下着のラインが透ける</strong>
            普通の下着だとラインが響いてしまう。かといってノーパンは衛生的に気になる。
          </div>
        </div>
        <div class="naro-problem-item animate-on-scroll">
          <div class="naro-problem-icon">03</div>
          <div class="naro-problem-text">
            <strong>動くとズレて不快</strong>
            運動中に下着がズレて、何度も直すのがストレス。もっと快適に動きたい。
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CAMEL TOE PROOF SECTION -->
  <section class="naro-ctp-section">
    <div class="naro-section-inner">
      <p class="naro-section-label animate-on-scroll">What's Camel Toe Proof?</p>
      <h2 class="naro-ctp-title animate-on-scroll">海外で常識の「Camel Toe Proof」、<br>ついに日本上陸。</h2>
      <div class="naro-ctp-content animate-on-scroll">
        <p>Camel Toe（キャメルトゥ）とは、レギンス着用時に股のラインがくっきり見えてしまう現象。</p>
        <p>海外では、これを防ぐ下着が当たり前になっています。</p>
        <p class="naro-ctp-highlight">naroは、この技術を日本向けに設計しました。</p>
      </div>
    </div>
  </section>

  <!-- SOLUTION SECTION -->
  <section class="naro-solution">
    <div class="naro-solution-inner">
      <div class="naro-solution-image animate-on-scroll">
        <img src="{{ product.featured_image | image_url: width: 800 }}" alt="{{ product.title }}">
      </div>
      <div class="naro-solution-content animate-on-scroll">
        <p class="naro-section-label">Solution</p>
        <h2 class="naro-section-title">naroが、すべて解決します</h2>
        <p class="naro-solution-text">
          独自のフラットフロント構造で、気になるラインを自然にカバー。ソングタイプだから、ヒップラインも響きません。これで、もう何も気にせずトレーニングに集中できます。
        </p>
        <div class="naro-solution-features">
          <div class="naro-solution-feature">
            <span class="naro-solution-feature-icon">✓</span>
            股のラインをカバー
          </div>
          <div class="naro-solution-feature">
            <span class="naro-solution-feature-icon">✓</span>
            ヒップラインに響かない
          </div>
          <div class="naro-solution-feature">
            <span class="naro-solution-feature-icon">✓</span>
            ズレにくい設計
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURES SECTION -->
  <section class="naro-features">
    <div class="naro-section-inner">
      <p class="naro-section-label animate-on-scroll">Features</p>
      <h2 class="naro-section-title animate-on-scroll">3つの特徴</h2>
    </div>
    <div class="naro-features-grid">
      <div class="naro-feature-card animate-on-scroll">
        <div class="naro-feature-icon">◎</div>
        <h3 class="naro-feature-title">フラットフロント構造</h3>
        <p class="naro-feature-desc">フロント部分は厚めの生地を使用。気になる股のラインが出にくく、レギンス越しでも安心。</p>
      </div>
      <div class="naro-feature-card animate-on-scroll">
        <div class="naro-feature-icon">◇</div>
        <h3 class="naro-feature-title">ソングタイプ</h3>
        <p class="naro-feature-desc">バックはソング（Tバック）タイプ。ヒップラインに響かず、美しいシルエットをキープ。</p>
      </div>
      <div class="naro-feature-card animate-on-scroll">
        <div class="naro-feature-icon">○</div>
        <h3 class="naro-feature-title">快適な素材</h3>
        <p class="naro-feature-desc">薄手で軽やかな素材を使用。長時間の着用でも快適で、運動中もストレスフリー。</p>
      </div>
    </div>
  </section>

  <!-- SCENES SECTION -->
  <section class="naro-scenes">
    <div class="naro-section-inner">
      <p class="naro-section-label animate-on-scroll">Scenes</p>
      <h2 class="naro-section-title animate-on-scroll">こんなシーンで活躍</h2>
    </div>
    <div class="naro-scenes-grid">
      <div class="naro-scene-card animate-on-scroll">
        <div class="naro-scene-icon">Yoga</div>
        <div class="naro-scene-content">
          <h3 class="naro-scene-title">ヨガ</h3>
          <p class="naro-scene-desc">どんなポーズでもラインを気にせず集中できる</p>
        </div>
      </div>
      <div class="naro-scene-card animate-on-scroll">
        <div class="naro-scene-icon">Gym</div>
        <div class="naro-scene-content">
          <h3 class="naro-scene-title">ジム・筋トレ</h3>
          <p class="naro-scene-desc">マシンやフリーウェイトも自信を持ってトレーニング</p>
        </div>
      </div>
      <div class="naro-scene-card animate-on-scroll">
        <div class="naro-scene-icon">Run</div>
        <div class="naro-scene-content">
          <h3 class="naro-scene-title">ランニング</h3>
          <p class="naro-scene-desc">ズレにくく、長時間の運動も快適</p>
        </div>
      </div>
    </div>
  </section>

  <!-- PRODUCT SECTION -->
  <section class="naro-product-section" id="product">
    <div class="naro-product-container">
      <!-- 画像ギャラリー -->
      <div class="naro-gallery">
        <div class="naro-main-image" onclick="openLightbox()">
          <img 
            id="mainImage"
            src="{{ product.featured_image | image_url: width: 1000 }}" 
            alt="{{ product.featured_image.alt | escape }}"
          >
          <div class="naro-zoom-hint">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="M21 21l-4.35-4.35"></path>
              <path d="M11 8v6M8 11h6"></path>
            </svg>
          </div>
        </div>
        
        {% if product.images.size > 1 %}
          <div class="naro-thumbnails">
            {% for image in product.images %}
              <div 
                class="naro-thumbnail {% if forloop.first %}active{% endif %}"
                onclick="changeImage('{{ image | image_url: width: 1000 }}', this)"
              >
                <img 
                  src="{{ image | image_url: width: 200 }}" 
                  alt="{{ image.alt | escape }}"
                >
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- 商品情報 -->
      <div class="naro-product-info">
        <p class="naro-product-brand">naro</p>
        <h2 class="naro-product-title">{{ product.title }}</h2>
        <p class="naro-product-price" id="product-price">¥{{ product.price | money_without_currency | remove: ',' }}</p>
        <p class="naro-price-per-item" id="price-per-item"></p>

        <form action="/cart/add" method="post">
          {% for option in product.options_with_values %}
            <div class="naro-option-group">
              <span class="naro-option-label">{{ option.name }}</span>
              <div class="naro-color-options">
                {% for value in option.values %}
                  {% if option.name == 'セット' or option.name == 'set' %}
                    <label class="naro-set-option {% if forloop.first %}selected{% endif %}">
                      <input 
                        type="radio" 
                        name="{{ option.name }}" 
                        value="{{ value }}"
                        {% if forloop.first %}checked{% endif %}
                        onchange="updateVariant()"
                      >
                      <span class="naro-set-name">
                        {{ value }}
                        {% if value == '2枚セット' %}<span class="naro-set-badge">12% OFF</span>{% endif %}
                        {% if value == '3枚セット' %}<span class="naro-set-badge">25% OFF</span>{% endif %}
                      </span>
                      <span class="naro-set-price">
                        {% if value == '1枚' %}¥3,990{% endif %}
                        {% if value == '2枚セット' %}¥6,980{% endif %}
                        {% if value == '3枚セット' %}¥8,970{% endif %}
                      </span>
                    </label>
                  {% else %}
                    <label class="naro-color-option {% if forloop.first %}selected{% endif %}">
                      <input 
                        type="radio" 
                        name="{{ option.name }}" 
                        value="{{ value }}"
                        {% if forloop.first %}checked{% endif %}
                        onchange="updateVariant()"
                      >
                      {{ value }}
                    </label>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% endfor %}
          
          <input type="hidden" name="id" id="variant-id" value="{{ product.selected_or_first_available_variant.id }}">
          
          <button type="submit" class="naro-add-to-cart" id="add-to-cart-btn" onclick="trackAddToCart()" {% unless product.available %}disabled{% endunless %}>
            {% if product.available %}
              カートに追加
            {% else %}
              売り切れ
            {% endif %}
          </button>
        </form>

        <div class="naro-benefits">
          <div class="naro-benefit">
            <span class="naro-benefit-icon">✓</span>
            2〜3営業日で発送
          </div>
          <div class="naro-benefit">
            <span class="naro-benefit-icon">✓</span>
            30日間返品保証
          </div>
          <div class="naro-benefit">
            <span class="naro-benefit-icon">✓</span>
            ¥5,000以上で送料無料
          </div>
        </div>

        <!-- 商品詳細（アコーディオン） -->
        <div class="naro-product-details">
          <div class="naro-details-accordion">
            <div class="naro-details-header" onclick="toggleDetails(this)">
              <span>商品詳細</span>
              <span class="naro-details-toggle">+</span>
            </div>
            <div class="naro-details-body">
              <p><strong>素材</strong>：ナイロン85%、ポリウレタン15%</p>
              <p><strong>カラー</strong>：ブラック / ベージュ</p>
              <p><strong>生産国</strong>：中国</p>
              <p class="naro-details-note">※軽やかな薄手生地を使用しているため、縫い目が若干斜めになっていたり、多少の歪みが見られる場合がございます。着用には問題ございませんが、あらかじめご了承ください。</p>
              <p class="naro-details-note">※モデル着用サイズ：L（ヒップ93cm、ウエスト63cm）</p>
            </div>
          </div>

          <div class="naro-details-accordion">
            <div class="naro-details-header" onclick="toggleDetails(this)">
              <span>サイズ</span>
              <span class="naro-details-toggle">+</span>
            </div>
            <div class="naro-details-body">
              <div class="naro-size-chart">
                <table>
                  <thead>
                    <tr>
                      <th></th>
                      <th>S</th>
                      <th>M</th>
                      <th>L</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>ウエスト</td>
                      <td>29</td>
                      <td>31</td>
                      <td>33</td>
                    </tr>
                    <tr>
                      <td>股上</td>
                      <td>18</td>
                      <td>19</td>
                      <td>20</td>
                    </tr>
                    <tr>
                      <td>サイド丈</td>
                      <td>35</td>
                      <td>35</td>
                      <td>35</td>
                    </tr>
                  </tbody>
                </table>
                <p class="naro-size-note">※単位：cm</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ SECTION -->
  <section class="naro-faq">
    <div class="naro-section-inner">
      <p class="naro-section-label animate-on-scroll">FAQ</p>
      <h2 class="naro-section-title animate-on-scroll">よくある質問</h2>
    </div>
    <div class="naro-faq-list">
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          サイズの選び方は？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          普段お使いの下着と同じサイズをお選びください。S/M/Lの3サイズ展開です。迷われた場合は、ワンサイズ大きめをおすすめします。
        </div>
      </div>
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          洗濯方法は？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          洗濯ネットに入れて、洗濯機で洗えます。乾燥機のご使用はお控えください。長くお使いいただくために、手洗いをおすすめします。
        </div>
      </div>
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          返品・交換はできますか？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          未使用・未開封の場合、商品到着から30日以内であれば返品・交換を承ります。サイズが合わない場合もお気軽にご連絡ください。
        </div>
      </div>
      <div class="naro-faq-item">
        <div class="naro-faq-question" onclick="toggleFaq(this)">
          配送にはどれくらいかかりますか？
          <span class="naro-faq-toggle">+</span>
        </div>
        <div class="naro-faq-answer">
          ご注文から2〜3営業日で発送いたします。発送後、通常1〜3日でお届けします。
        </div>
      </div>
    </div>
  </section>

  <!-- FINAL CTA SECTION -->
  <section class="naro-final-cta">
    <div class="naro-section-inner" style="text-align: center;">
      <h2 class="naro-final-cta-title">もう、気にしない。</h2>
      <p class="naro-final-cta-subtitle">naroで、自信を持ってトレーニングを。</p>
      <a href="#product" class="naro-final-cta-button">今すぐ購入する</a>
    </div>
  </section>

  <!-- LIGHTBOX -->
  <div class="naro-lightbox" id="lightbox">
    <button class="naro-lightbox-close" onclick="closeLightbox()">&times;</button>
    <button class="naro-lightbox-prev" onclick="prevImage(event)">&#10094;</button>
    <button class="naro-lightbox-next" onclick="nextImage(event)">&#10095;</button>
    <img class="naro-lightbox-image" id="lightboxImage" src="" alt="" onclick="event.stopPropagation()">
    <div class="naro-lightbox-counter" id="lightboxCounter"></div>
  </div>

</div>

<script>
  // スクロールアニメーション
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.animate-on-scroll').forEach(el => {
    observer.observe(el);
  });

  // 画像切り替え
  function changeImage(src, element) {
    document.getElementById('mainImage').src = src;
    document.querySelectorAll('.naro-thumbnail').forEach(el => el.classList.remove('active'));
    element.classList.add('active');
  }

  // ライトボックス
  const productImages = [
    {% for image in product.images %}
      '{{ image | image_url: width: 1500 }}'{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];
  let currentImageIndex = 0;

  function openLightbox() {
    const mainImageSrc = document.getElementById('mainImage').src;
    // 現在表示中の画像のインデックスを取得
    currentImageIndex = productImages.findIndex(img => mainImageSrc.includes(img.split('?')[0].split('/').pop().split('.')[0]));
    if (currentImageIndex === -1) currentImageIndex = 0;
    
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightboxImage');
    
    lightboxImage.src = productImages[currentImageIndex];
    updateCounter();
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    const lightbox = document.getElementById('lightbox');
    const counter = document.getElementById('lightboxCounter');
    const prevBtn = document.querySelector('.naro-lightbox-prev');
    const nextBtn = document.querySelector('.naro-lightbox-next');
    
    lightbox.classList.remove('active');
    document.body.style.overflow = '';
    
    // ボタンを戻す
    counter.style.display = '';
    prevBtn.style.display = '';
    nextBtn.style.display = '';
  }

  function prevImage(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    currentImageIndex = (currentImageIndex - 1 + productImages.length) % productImages.length;
    document.getElementById('lightboxImage').src = productImages[currentImageIndex];
    updateCounter();
  }

  function nextImage(event) {
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    currentImageIndex = (currentImageIndex + 1) % productImages.length;
    document.getElementById('lightboxImage').src = productImages[currentImageIndex];
    updateCounter();
  }

  function updateCounter() {
    document.getElementById('lightboxCounter').textContent = (currentImageIndex + 1) + ' / ' + productImages.length;
  }

  // ライトボックス背景クリックで閉じる
  document.getElementById('lightbox').addEventListener('click', function(e) {
    // ボタンや画像以外の場所（背景）をクリックした場合のみ閉じる
    if (e.target === this) {
      closeLightbox();
    }
  });

  // キーボード操作
  document.addEventListener('keydown', function(e) {
    const lightbox = document.getElementById('lightbox');
    if (!lightbox.classList.contains('active')) return;
    
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft') prevImage(null);
    if (e.key === 'ArrowRight') nextImage(null);
  });

  // ヒーロー画像のライトボックス
  function openHeroLightbox() {
    const heroImage = document.querySelector('.naro-hero-image img');
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightboxImage');
    const counter = document.getElementById('lightboxCounter');
    const prevBtn = document.querySelector('.naro-lightbox-prev');
    const nextBtn = document.querySelector('.naro-lightbox-next');
    
    lightboxImage.src = heroImage.src;
    counter.style.display = 'none';
    prevBtn.style.display = 'none';
    nextBtn.style.display = 'none';
    
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  // FAQ開閉
  function toggleFaq(element) {
    const item = element.parentElement;
    item.classList.toggle('open');
  }

  // 商品詳細アコーディオン開閉
  function toggleDetails(element) {
    const accordion = element.parentElement;
    accordion.classList.toggle('open');
  }

  // バリアント更新
  const productVariants = {{ product.variants | json }};

  function updateVariant() {
    const selectedOptions = [];
    
    document.querySelectorAll('.naro-color-options input:checked').forEach(input => {
      selectedOptions.push(input.value);
    });

    const selectedVariant = productVariants.find(variant => {
      return selectedOptions.every((option, index) => {
        return variant.options[index] === option;
      });
    });

    if (selectedVariant) {
      document.getElementById('variant-id').value = selectedVariant.id;
      
      const price = selectedVariant.price / 100;
      document.getElementById('product-price').innerHTML = '¥' + price.toLocaleString();
      
      const pricePerItem = document.getElementById('price-per-item');
      const setOption = selectedOptions.find(opt => opt.includes('枚'));
      
      if (setOption === '2枚セット') {
        const perItem = Math.round(price / 2);
        pricePerItem.innerHTML = '1枚あたり ¥' + perItem.toLocaleString() + ' <span class="naro-discount-badge">12% OFF</span>';
      } else if (setOption === '3枚セット') {
        const perItem = Math.round(price / 3);
        pricePerItem.innerHTML = '1枚あたり ¥' + perItem.toLocaleString() + ' <span class="naro-discount-badge">25% OFF</span>';
      } else {
        pricePerItem.innerHTML = '';
      }
      
      // オプション選択状態の更新
      document.querySelectorAll('.naro-color-option, .naro-set-option').forEach(label => {
        const input = label.querySelector('input');
        if (input && input.checked) {
          label.classList.add('selected');
        } else {
          label.classList.remove('selected');
        }
      });
      
      const btn = document.getElementById('add-to-cart-btn');
      if (selectedVariant.available) {
        btn.disabled = false;
        btn.textContent = 'カートに追加';
      } else {
        btn.disabled = true;
        btn.textContent = '売り切れ';
      }
    }
  }

  // Meta Pixel - Add to Cart イベント
  function trackAddToCart() {
    const selectedOptions = [];
    
    document.querySelectorAll('.naro-color-options input:checked').forEach(input => {
      selectedOptions.push(input.value);
    });

    const selectedVariant = productVariants.find(variant => {
      return selectedOptions.every((option, index) => {
        return variant.options[index] === option;
      });
    });

    if (selectedVariant && typeof fbq !== 'undefined') {
      fbq('track', 'AddToCart', {
        content_name: '{{ product.title }}',
        content_ids: [selectedVariant.id.toString()],
        content_type: 'product',
        value: selectedVariant.price / 100,
        currency: 'JPY'
      });
    }
  }

  // 初期表示時に価格を更新
  document.addEventListener('DOMContentLoaded', function() {
    updateVariant();
  });

  // スムーズスクロール
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });
</script>

{% schema %}
{
  "name": "naro LP Product v4",
  "settings": [],
  "presets": [
    {
      "name": "naro LP Product v4"
    }
  ]
}
{% endschema %}
